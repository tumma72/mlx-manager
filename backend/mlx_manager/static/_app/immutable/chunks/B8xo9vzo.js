import{c as k,a as p,f as S,t as Q}from"./vfPE-AD7.js";import"./1jpszzm8.js";import{i as y,p as qe,j as Be,g as r,u as T,s as W,d as n,e as d,r as c,f,t as H,n as j,c as Le}from"./DhUiKsxN.js";import{I as R,a as E}from"./CkjAMN-G.js";import{l as D,b as F,i as M}from"./DUil1G3I.js";import{s as z}from"./Dsv8gxIT.js";import{g as Te}from"./DdZy-IqV.js";import{L as ce,s as B}from"./Bi39ZwnA.js";import{p as fe}from"./C_JzOHr5.js";import{T as He,B as X,H as je,a as Ae}from"./C1cYCadf.js";import{C as Ie,B as C}from"./BXw2ESc5.js";import{M as Ue,C as Ve}from"./DvDcXk52.js";function ve($,e){const a=D(e,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2"}]];R($,F({name:"activity"},()=>a,{get iconNode(){return l},children:(i,w)=>{var o=k(),m=y(o);E(m,e,"default",{}),p(i,o)},$$slots:{default:!0}}))}function We($,e){const a=D(e,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"}]];R($,F({name:"copy"},()=>a,{get iconNode(){return l},children:(i,w)=>{var o=k(),m=y(o);E(m,e,"default",{}),p(i,o)},$$slots:{default:!0}}))}function Ge($,e){const a=D(e,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l=[["polygon",{points:"6 3 20 12 6 21 6 3"}]];R($,F({name:"play"},()=>a,{get iconNode(){return l},children:(i,w)=>{var o=k(),m=y(o);E(m,e,"default",{}),p(i,o)},$$slots:{default:!0}}))}function _t($,e){const a=D(e,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l=[["path",{d:"M5 12h14"}],["path",{d:"M12 5v14"}]];R($,F({name:"plus"},()=>a,{get iconNode(){return l},children:(i,w)=>{var o=k(),m=y(o);E(m,e,"default",{}),p(i,o)},$$slots:{default:!0}}))}function Je($,e){const a=D(e,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8"}],["path",{d:"M21 3v5h-5"}]];R($,F({name:"rotate-cw"},()=>a,{get iconNode(){return l},children:(i,w)=>{var o=k(),m=y(o);E(m,e,"default",{}),p(i,o)},$$slots:{default:!0}}))}function Ke($,e){const a=D(e,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z"}]];R($,F({name:"square-pen"},()=>a,{get iconNode(){return l},children:(i,w)=>{var o=k(),m=y(o);E(m,e,"default",{}),p(i,o)},$$slots:{default:!0}}))}function Oe($,e){const a=D(e,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"}]];R($,F({name:"square"},()=>a,{get iconNode(){return l},children:(i,w)=>{var o=k(),m=y(o);E(m,e,"default",{}),p(i,o)},$$slots:{default:!0}}))}var Qe=S('<p class="text-sm text-muted-foreground mt-1"> </p>'),Xe=S("<!> Chat",1),Ye=S("<!> <!> <!>",1),Ze=S("<!> Start",1),et=S('<div class="mt-4 grid grid-cols-2 md:grid-cols-4 gap-4 text-sm"><div class="flex items-center gap-2"><!> <span class="text-muted-foreground">Port:</span> <span class="font-mono"> </span></div> <div class="flex items-center gap-2"><!> <span class="text-muted-foreground">PID:</span> <span class="font-mono"> </span></div> <div class="flex items-center gap-2"><!> <span class="text-muted-foreground">Memory:</span> <span> </span></div> <div class="flex items-center gap-2"><span class="text-muted-foreground">Uptime:</span> <span> </span></div></div>'),tt=S('<div class="mt-3 flex items-center gap-4 text-sm text-muted-foreground"><div class="flex items-center gap-2"><!> <span>Port:</span> <span class="font-mono"> </span></div> <div class="flex items-center gap-2"><span>Type:</span> <span> </span></div></div>'),at=S('<div class="mt-2 text-sm text-red-500"> </div>'),rt=S('<div class="flex items-start justify-between gap-4"><div class="flex-1 min-w-0"><div class="flex items-center gap-2 flex-wrap"><h3 class="font-semibold text-lg"> </h3> <!> <!></div> <!> <div class="mt-2 text-sm text-muted-foreground truncate"><span class="font-mono"> </span></div></div> <div class="flex items-center gap-2 flex-shrink-0"><!> <!> <!> <!></div></div> <!> <!>',1);function ht($,e){qe(e,!0);let a=W(!1),l=W(null),i=W(!1),w=W(!1);const o=T(()=>!!e.server||B.isRunning(e.profile.id)),m=T(()=>e.server||B.getServer(e.profile.id));Be(()=>{r(o)&&!r(i)&&!r(w)&&A(),r(o)||n(i,!1)});async function A(){n(w,!0);try{const v=await fetch(`http://${e.profile.host}:${e.profile.port}/v1/models`);if(v.ok){const q=await v.json();n(i,q.data&&q.data.length>0,!0)}}catch{n(i,!1)}finally{n(w,!1)}r(o)&&!r(i)&&setTimeout(A,2e3)}async function ue(){n(a,!0),n(l,null),n(i,!1);try{await B.start(e.profile.id),A()}catch(v){n(l,v instanceof Error?v.message:"Failed to start server",!0)}finally{n(a,!1)}}async function pe(){n(a,!0),n(l,null),n(i,!1);try{await B.stop(e.profile.id)}catch(v){n(l,v instanceof Error?v.message:"Failed to stop server",!0)}finally{n(a,!1)}}async function me(){n(a,!0),n(l,null),n(i,!1);try{await B.restart(e.profile.id),setTimeout(A,2e3)}catch(v){n(l,v instanceof Error?v.message:"Failed to restart server",!0)}finally{n(a,!1)}}async function _e(){if(confirm("Are you sure you want to delete this profile?")){n(a,!0),n(l,null);try{r(o)&&await B.stop(e.profile.id),await fe.delete(e.profile.id)}catch(v){n(l,v instanceof Error?v.message:"Failed to delete profile",!0)}finally{n(a,!1)}}}async function he(){const v=prompt("Enter name for the duplicate profile:",`${e.profile.name} (copy)`);if(v){n(a,!0),n(l,null);try{await fe.duplicate(e.profile.id,v)}catch(q){n(l,q instanceof Error?q.message:"Failed to duplicate profile",!0)}finally{n(a,!1)}}}function ge(){Te(`/chat?profile=${e.profile.id}`)}Ie($,{class:"p-4",children:(v,q)=>{var Y=rt(),G=y(Y),J=d(G),K=d(J),O=d(K),$e=d(O,!0);c(O);var Z=f(O,2);{var xe=t=>{var s=k(),u=y(s);{var x=_=>{X(_,{variant:"success",children:(h,g)=>{j();var N=Q("Ready");p(h,N)},$$slots:{default:!0}})},P=_=>{X(_,{variant:"warning",children:(h,g)=>{j();var N=Q("Loading...");p(h,N)},$$slots:{default:!0}})};M(u,_=>{r(i)?_(x):_(P,!1)})}p(t,s)};M(Z,t=>{r(o)&&t(xe)})}var ye=f(Z,2);{var we=t=>{X(t,{variant:"outline",children:(s,u)=>{j();var x=Q("launchd");p(s,x)},$$slots:{default:!0}})};M(ye,t=>{e.profile.launchd_installed&&t(we)})}c(K);var ee=f(K,2);{var Pe=t=>{var s=Qe(),u=d(s,!0);c(s),H(()=>z(u,e.profile.description)),p(t,s)};M(ee,t=>{e.profile.description&&t(Pe)})}var te=f(ee,2),ae=d(te),ze=d(ae,!0);c(ae),c(te),c(J);var re=f(J,2),se=d(re);{var Ne=t=>{var s=Ye(),u=y(s);{let _=T(()=>r(a)||!r(i)),h=T(()=>r(i)?"Chat with model":"Waiting for model to load...");C(u,{variant:"default",size:"sm",onclick:ge,get disabled(){return r(_)},get title(){return r(h)},children:(g,N)=>{var I=Xe(),L=y(I);{var U=b=>{ce(b,{class:"w-4 h-4 mr-1 animate-spin"})},V=b=>{Ue(b,{class:"w-4 h-4 mr-1"})};M(L,b=>{r(w)&&!r(i)?b(U):b(V,!1)})}j(),p(g,I)},$$slots:{default:!0}})}var x=f(u,2);C(x,{variant:"outline",size:"icon",onclick:pe,get disabled(){return r(a)},title:"Stop",children:(_,h)=>{Oe(_,{class:"w-4 h-4"})},$$slots:{default:!0}});var P=f(x,2);C(P,{variant:"outline",size:"icon",onclick:me,get disabled(){return r(a)},title:"Restart",children:(_,h)=>{Je(_,{class:"w-4 h-4"})},$$slots:{default:!0}}),p(t,s)},Me=t=>{C(t,{variant:"default",size:"sm",onclick:ue,get disabled(){return r(a)},title:"Start",children:(s,u)=>{var x=Ze(),P=y(x);{var _=g=>{ce(g,{class:"w-4 h-4 mr-1 animate-spin"})},h=g=>{Ge(g,{class:"w-4 h-4 mr-1"})};M(P,g=>{r(a)?g(_):g(h,!1)})}j(),p(s,x)},$$slots:{default:!0}})};M(se,t=>{r(o)?t(Ne):t(Me,!1)})}var ne=f(se,2);{let t=T(()=>`/profiles/${e.profile.id}`);C(ne,{variant:"outline",size:"icon",get href(){return r(t)},title:"Edit",children:(s,u)=>{Ke(s,{class:"w-4 h-4"})},$$slots:{default:!0}})}var oe=f(ne,2);C(oe,{variant:"outline",size:"icon",onclick:he,get disabled(){return r(a)},title:"Duplicate",children:(t,s)=>{We(t,{class:"w-4 h-4"})},$$slots:{default:!0}});var be=f(oe,2);C(be,{variant:"outline",size:"icon",onclick:_e,get disabled(){return r(a)},title:"Delete",children:(t,s)=>{He(t,{class:"w-4 h-4"})},$$slots:{default:!0}}),c(re),c(G);var le=f(G,2);{var ke=t=>{var s=et(),u=d(s),x=d(u);ve(x,{class:"w-4 h-4 text-muted-foreground"});var P=f(x,4),_=d(P,!0);c(P),c(u);var h=f(u,2),g=d(h);Ve(g,{class:"w-4 h-4 text-muted-foreground"});var N=f(g,4),I=d(N,!0);c(N),c(h);var L=f(h,2),U=d(L);je(U,{class:"w-4 h-4 text-muted-foreground"});var V=f(U,4),b=d(V);c(V),c(L);var ie=f(L,2),de=f(d(ie),2),Ee=d(de,!0);c(de),c(ie),c(s),H((De,Fe)=>{z(_,e.profile.port),z(I,r(m).pid),z(b,`${De??""} MB`),z(Ee,Fe)},[()=>r(m).memory_mb.toFixed(1),()=>Ae(r(m).uptime_seconds)]),p(t,s)},Se=t=>{var s=tt(),u=d(s),x=d(u);ve(x,{class:"w-4 h-4"});var P=f(x,4),_=d(P,!0);c(P),c(u);var h=f(u,2),g=f(d(h),2),N=d(g,!0);c(g),c(h),c(s),H(()=>{z(_,e.profile.port),z(N,e.profile.model_type)}),p(t,s)};M(le,t=>{r(m)?t(ke):t(Se,!1)})}var Ce=f(le,2);{var Re=t=>{var s=at(),u=d(s,!0);c(s),H(()=>z(u,r(l))),p(t,s)};M(Ce,t=>{r(l)&&t(Re)})}H(()=>{z($e,e.profile.name),z(ze,e.profile.model_path)}),p(v,Y)},$$slots:{default:!0}}),Le()}export{_t as P,ht as a};
