import{f as k,a as f,t as ie}from"./vfPE-AD7.js";import{p as Se,j as Te,d as t,c as Me,s,i as oe,g as e,f as a,e as l,t as W,r as i,n as X}from"./DhUiKsxN.js";import{d as ze,e as we,s as O}from"./Dsv8gxIT.js";import{p as de,i as se}from"./DUil1G3I.js";import{r as Ae}from"./CkjAMN-G.js";import{C as Be,I as m,S as Ie,B as ue,b as Qe}from"./BXw2ESc5.js";var je=k("<option>Language Model (lm)</option> <option>Multimodal (Vision)</option>",1),De=k('<div class="space-y-4 pt-4 border-t"><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><label for="host" class="block text-sm font-medium mb-1">Host</label> <!></div> <div><label for="maxConcurrency" class="block text-sm font-medium mb-1">Max Concurrency</label> <!></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><label for="queueTimeout" class="block text-sm font-medium mb-1">Queue Timeout (seconds)</label> <!></div> <div><label for="queueSize" class="block text-sm font-medium mb-1">Queue Size</label> <!></div></div> <div class="space-y-2"><label class="flex items-center gap-2"><input type="checkbox" class="rounded"/> <span class="text-sm">Start on Login (launchd)</span></label></div></div>'),Ee=k('<div class="mt-4 text-sm text-red-500"> </div>'),Fe=k('<h2 class="text-xl font-semibold mb-6"> </h2> <div class="space-y-4"><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><label for="name" class="block text-sm font-medium mb-1">Name *</label> <!></div> <div><label for="port" class="block text-sm font-medium mb-1">Port *</label> <!></div></div> <div><label for="description" class="block text-sm font-medium mb-1">Description</label> <!></div> <div><label for="modelPath" class="block text-sm font-medium mb-1">Model Path *</label> <!></div> <div><label for="modelType" class="block text-sm font-medium mb-1">Model Type</label> <!></div> <div class="pt-4"><button type="button" class="text-sm text-primary hover:underline"> </button></div> <!></div> <!> <div class="mt-6 flex justify-end gap-3"><!> <!></div>',1),He=k("<form><!></form>");function Je(ne,o){Se(o,!0);let ve=de(o,"nextPort",3,10240),me=de(o,"initialModelPath",3,""),h=s(!1),q=s(null),C=s(""),S=s(""),T=s(""),M=s("lm"),z=s(10240),w=s("127.0.0.1"),A=s(1),B=s(300),I=s(100),Q=s(!1),j=s(!1);Te(()=>{var v,y,b,E,p,g,x,F,P,H;t(C,((v=o.profile)==null?void 0:v.name)??"",!0),t(S,((y=o.profile)==null?void 0:y.description)??"",!0),t(T,((b=o.profile)==null?void 0:b.model_path)??me(),!0);const _=((E=o.profile)==null?void 0:E.model_type)??"lm";t(M,["lm","multimodal"].includes(_)?_:"lm",!0),t(z,((p=o.profile)==null?void 0:p.port)??ve(),!0),t(w,((g=o.profile)==null?void 0:g.host)??"127.0.0.1",!0),t(A,((x=o.profile)==null?void 0:x.max_concurrency)??1,!0),t(B,((F=o.profile)==null?void 0:F.queue_timeout)??300,!0),t(I,((P=o.profile)==null?void 0:P.queue_size)??100,!0),t(Q,((H=o.profile)==null?void 0:H.auto_start)??!1,!0)});async function ce(_){_.preventDefault(),t(h,!0),t(q,null);try{const v={name:e(C),description:e(S)||void 0,model_path:e(T),model_type:e(M),port:e(z),host:e(w),max_concurrency:e(A),queue_timeout:e(B),queue_size:e(I),auto_start:e(Q)};await o.onSubmit(v)}catch(v){t(q,v instanceof Error?v.message:"Failed to save profile",!0)}finally{t(h,!1)}}var D=He(),fe=l(D);Be(fe,{class:"p-6",children:(_,v)=>{var y=Fe(),b=oe(y),E=l(b,!0);i(b);var p=a(b,2),g=l(p),x=l(g),F=a(l(x),2);m(F,{id:"name",placeholder:"e.g., Coding Assistant",required:!0,get value(){return e(C)},set value(r){t(C,r,!0)}}),i(x);var P=a(x,2),H=a(l(P),2);m(H,{id:"port",type:"number",required:!0,get value(){return e(z)},set value(r){t(z,r,!0)}}),i(P),i(g);var N=a(g,2),_e=a(l(N),2);m(_e,{id:"description",placeholder:"Optional description",get value(){return e(S)},set value(r){t(S,r,!0)}}),i(N);var U=a(N,2),be=a(l(U),2);m(be,{id:"modelPath",placeholder:"e.g., mlx-community/Qwen2.5-Coder-32B-Instruct-4bit",required:!0,get value(){return e(T)},set value(r){t(T,r,!0)}}),i(U);var V=a(U,2),pe=a(l(V),2);Ie(pe,{id:"modelType",get value(){return e(M)},set value(r){t(M,r,!0)},children:(r,u)=>{var d=je(),c=oe(d);c.value=c.__value="lm";var L=a(c,2);L.value=L.__value="multimodal",f(r,d)},$$slots:{default:!0}}),i(V);var G=a(V,2),J=l(G);J.__click=()=>t(j,!e(j));var ge=l(J);i(J),i(G);var xe=a(G,2);{var he=r=>{var u=De(),d=l(u),c=l(d),L=a(l(c),2);m(L,{id:"host",get value(){return e(w)},set value(n){t(w,n,!0)}}),i(c);var ee=a(c,2),ke=a(l(ee),2);m(ke,{id:"maxConcurrency",type:"number",get value(){return e(A)},set value(n){t(A,n,!0)}}),i(ee),i(d);var K=a(d,2),R=l(K),qe=a(l(R),2);m(qe,{id:"queueTimeout",type:"number",get value(){return e(B)},set value(n){t(B,n,!0)}}),i(R);var te=a(R,2),Ce=a(l(te),2);m(Ce,{id:"queueSize",type:"number",get value(){return e(I)},set value(n){t(I,n,!0)}}),i(te),i(K);var ae=a(K,2),re=l(ae),le=l(re);Ae(le),X(2),i(re),i(ae),i(u),Qe(le,()=>e(Q),n=>t(Q,n)),f(r,u)};se(xe,r=>{e(j)&&r(he)})}i(p);var Y=a(p,2);{var ye=r=>{var u=Ee(),d=l(u,!0);i(u),W(()=>O(d,e(q))),f(r,u)};se(Y,r=>{e(q)&&r(ye)})}var Z=a(Y,2),$=l(Z);ue($,{variant:"outline",get onclick(){return o.onCancel},get disabled(){return e(h)},children:(r,u)=>{X();var d=ie("Cancel");f(r,d)},$$slots:{default:!0}});var Pe=a($,2);ue(Pe,{type:"submit",get disabled(){return e(h)},children:(r,u)=>{X();var d=ie();W(()=>O(d,e(h)?"Saving...":o.profile?"Update Profile":"Create Profile")),f(r,d)},$$slots:{default:!0}}),i(Z),W(()=>{O(E,o.profile?"Edit Profile":"Create Profile"),O(ge,`${e(j)?"Hide":"Show"} Advanced Options`)}),f(_,y)},$$slots:{default:!0}}),i(D),we("submit",D,ce),f(ne,D),Me()}ze(["click"]);export{Je as P};
